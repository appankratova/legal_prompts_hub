# Кейс: Проверка контрагента по данным ФНС (ИНН → краткое досье)

## Описание

Кейс описывает связку: запрос к API‑ФНС по ИНН → выбор одного действующего юрлица → промпт для LLM, который формирует краткое юридическое досье на контрагента.  
Подходит для задач первичного due diligence, KYC, M&A‑проверок и регулярного мониторинга контрагентов.

## Входные данные

1. ИНН проверяемого контрагента.  
2. Результат скрипта интеграции с ФНС (пример: `prompts/scripts/fns_test.py`), который выводит:

         Название: ПОЛНОЕ НАИМЕНОВАНИЕ ЮРЛИЦА
         ИНН: 1234567890
         Статус: Действующее
         Адрес: полный адрес компании


## Техническая интеграция (шаг 0)

1. Запустите скрипт, передав в него ИНН (по умолчанию используется переменная `test_inn`).  
2. Скрипт делает запрос к API‑ФНС методом `search`, фильтрует результаты по:
   - совпадению ИНН,
   - статусу `Действующее`,
   - наличию блока `ЮЛ`.  
3. Первое подходящее юрлицо используется как единственный объект проверки и подставляется в промпт ниже.

## Базовый промпт для LLM

Ты — юрист по корпоративному праву и проверке контрагентов (KYC / due diligence).

У тебя есть данные о компании, полученные из ФНС России (ЕГРЮЛ):

      Название: {{Название}}
      ИНН: {{ИНН}}
      Статус: {{Статус}}
      Адрес: {{Адрес}}

Дай краткое резюме о компании: что можно сказать только по этим данным (форма, признаки действующего/недействующего юрлица, регион, возможные “красные флаги”).

Укажи, какие дополнительные источники данных (ФНС: расширенная выписка, данные о недобросовестности, судебная практика, бенефициары и др.) необходимо проверить в следующую очередь.

Сформулируй 3–5 уточняющих вопросов бизнес-заказчику (клиенту), которые помогут тебе оценить риски сделки или сотрудничества.

Сформируй вывод: “предварительно ОК / есть риски / высокорискованный контрагент” — с кратким обоснованием.

Отвечай структурированно, по пунктам.

## Варианты расширения кейса

- Добавить в скрипт вызов методов `egr` и `check` для получения:
  - истории компании,
  - признаков недобросовестности,
  - сведений о ликвидации/реорганизации.  
- Дополнить промпт блоком с анализом судебной практики (через отдельную интеграцию с КАД Арбитр).  
- Встраивать этот кейс в общие M&A‑шаблоны (например, как шаг “проверка контрагента по реестрам” перед анализом договоров).

## Рекомендации для контрибьюторов

- При добавлении новых промптов для проверки контрагентов по ФНС указывайте:
  - какой набор данных ожидается на вход (только search, search+egr, search+check и т.п.),
  - для каких задач подходит промпт (KYC, разовая сделка, M&A, постоянный мониторинг).  
- Старайтесь переиспользовать существующий скрипт или добавлять новые функции в общие утилиты, а не дублировать код.

## Варианты расширения кейса

- Добавить в скрипт вызов методов `egr` и `check` для получения:
  - истории компании,
  - признаков недобросовестности,
  - сведений о ликвидации/реорганизации.  
- Дополнить промпт блоком с анализом судебной практики (через отдельную интеграцию с КАД Арбитр).  
- Встраивать этот кейс в общие M&A‑шаблоны (например, как шаг “проверка контрагента по реестрам” перед анализом договоров).

## Рекомендации для контрибьюторов

- При добавлении новых промптов для проверки контрагентов по ФНС указывайте:
  - какой набор данных ожидается на вход (только search, search+egr, search+check и т.п.),
  - для каких задач подходит промпт (KYC, разовая сделка, M&A, постоянный мониторинг).  
- Старайтесь переиспользовать существующий скрипт или добавлять новые функции в общие утилиты, а не дублировать код.
